<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Verificación de CFDI – Demo</title>

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <style>
      :root {
        --gobmx-green: #0c231e;
      }

      body {
        padding-top: 4.5rem;
      }

      .navbar-sat {
        background: #1b1d21;
      }

      .sat-red {
        height: 4px;
        background: #930000;
      }

      #cfdiResult {
        display: none;
      }

      footer.footer-gobmx {
        background: var(--gobmx-green);
        color: #fff;
        padding: 0;
        font-size: 0.95rem;
      }

      .footer-gobmx a {
        color: #fff;
        text-decoration: none;
      }

      .footer-gobmx a:hover {
        text-decoration: underline;
      }

      .footer-pattern {
        height: 64px;
        background: var(--gobmx-green)
          url("https://framework-gb.cdn.gob.mx/gobmx/design/images/pattern-footer.svg")
          repeat-x bottom;
        background-size: contain;
      }
    </style>
  </head>

  <body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg fixed-top navbar-dark navbar-sat px-3">
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center" href="#">
          <img
            src="https://www.gob.mx/resources/img/logo_gob_mx.png"
            alt="SAT"
            height="35"
            class="me-2"
          />
          <span>Factura electrónica</span>
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#mainNav"
          aria-controls="mainNav"
          aria-expanded="false"
          aria-label="Menú"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="mainNav">
          <ul class="navbar-nav ms-auto">
            <!-- Enlaces solo demostrativos -->
            <li class="nav-item"><a class="nav-link" href="#">Trámites</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Gobierno</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="sat-red"></div>

    <!-- MAIN -->
    <main class="container my-5">
      <img
        src="https://verificacfdi.facturaelectronica.sat.gob.mx/Content/images/Logo_SHCP_SAT-.jpg"
        alt="SAT"
        style="max-width: 220px"
      />

      <h1 class="fw-bold">
        Verificación de Comprobantes Fiscales Digitales por Internet
      </h1>
      <p class="lead">
        A través de esta opción, usted podrá verificar si el comprobante fue
        certificado por el SAT.
      </p>

      <!-- FORMULARIO -->
      <form id="cfdiForm" class="row g-3 needs-validation" novalidate>
        <div class="col-md-4">
          <label for="uuid" class="form-label">
            Folio fiscal (UUID) <span class="text-danger">*</span>
          </label>
          <input
            type="text"
            class="form-control"
            id="uuid"
            value="FF31B287-F61E-43AC-AE59-3FCCAB132390"
            pattern="[A-Fa-f0-9\-]{36}"
            required
          />
        </div>

        <div class="col-md-4">
          <label for="rfcEm" class="form-label">
            RFC emisor <span class="text-danger">*</span>
          </label>
          <input
            type="text"
            class="form-control"
            id="rfcEm"
            value="KACX900528PB6"
            minlength="12"
            maxlength="13"
            required
          />
        </div>

        <div class="col-md-4">
          <label for="rfcRe" class="form-label">
            RFC receptor <span class="text-danger">*</span>
          </label>
          <input
            type="text"
            class="form-control"
            id="rfcRe"
            value="GAPJ7307162145"
            minlength="12"
            maxlength="13"
            required
          />
        </div>

        <!-- CAPTCHA -->
        <div class="col-md-4">
          <label class="form-label">Captcha <span class="text-danger">*</span></label>
          <div
            id="captchaText"
            class="border rounded bg-light d-flex align-items-center justify-content-center fs-4 fw-semibold"
            style="height: 60px"
            aria-label="Captcha generado"
          ></div>
          <button
            type="button"
            class="btn btn-outline-secondary btn-sm mt-2"
            id="refreshCaptcha"
          >
            Actualizar
          </button>
        </div>

        <div class="col-md-4">
          <label for="captchaInput" class="form-label">Ingresa los dígitos</label>
          <input
            type="text"
            class="form-control"
            id="captchaInput"
            aria-describedby="captchaText"
            required
          />
        </div>

        <div class="col-12 text-end mt-3">
          <button class="btn btn-primary" type="submit">
            Verificar CFDI
          </button>
        </div>
      </form>

      <!-- RESULTADO -->
      <div class="card mt-5" id="cfdiResult">
        <div class="card-body">
          <table class="table" id="resultTable">
            <caption class="visually-hidden">
              Resultado de verificación CFDI
            </caption>
            <tbody>
              <tr>
                <th>RFC del emisor</th>
                <th>Nombre del emisor</th>
                <th>RFC del receptor</th>
                <th>Nombre del receptor</th>
              </tr>
              <tr>
                <td id="tdRfcEmisor"></td>
                <td id="tdNombreEmisor"></td>
                <td id="tdRfcReceptor"></td>
                <td id="tdNombreReceptor"></td>
              </tr>
              <tr>
                <th>Folio fiscal</th>
                <th>Fecha expedición</th>
                <th>Fecha certificación</th>
                <th>PAC</th>
              </tr>
              <tr>
                <td id="tdFolio"></td>
                <td id="tdFechaExp"></td>
                <td id="tdFechaCert"></td>
                <td id="tdPac"></td>
              </tr>
              <tr>
                <th>Total</th>
                <th>Efecto</th>
                <th>Estado CFDI</th>
                <th></th>
              </tr>
              <tr>
                <td id="tdTotal"></td>
                <td id="tdEfecto"></td>
                <td id="tdEstado"></td>
                <td></td>
              </tr>
              <tr>
                <th>Estatus cancelación</th>
                <th>Fecha cancelación</th>
                <th></th>
                <th></th>
              </tr>
              <tr>
                <td id="tdEstatus"></td>
                <td id="tdFechaCanc"></td>
                <td></td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>

    <!-- JS -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    ></script>

    <script>
      function genCaptcha() {
        const chars = "ABCDEFGHJKMNPQRTUVWXYZ2346789";
        return Array.from({ length: 6 }, () =>
          chars[Math.floor(Math.random() * chars.length)]
        ).join("");
      }

      let currentCaptcha = "";

      function renderCaptcha() {
        currentCaptcha = genCaptcha();
        document.getElementById("captchaText").textContent =
          currentCaptcha.split("").join(" ");
      }

      document
        .getElementById("refreshCaptcha")
        .addEventListener("click", renderCaptcha);

      renderCaptcha();

      document.getElementById("cfdiForm").addEventListener("submit", function (e) {
        e.preventDefault();

        this.classList.add("was-validated");

        if (!this.checkValidity()) return;

        if (
          document.getElementById("captchaInput").value.trim().toUpperCase() !==
          currentCaptcha
        ) {
          alert("Captcha incorrecto. Intenta nuevamente.");
          renderCaptcha();
          return;
        }

        renderResult();
      });

      function renderResult() {
        document.getElementById("tdRfcEmisor").textContent =
          rfcEm.value.toUpperCase();
        document.getElementById("tdNombreEmisor").textContent =
          "ARMIN ARMANDO KANTUN CIME";
        document.getElementById("tdRfcReceptor").textContent =
          rfcRe.value.toUpperCase();
        document.getElementById("tdNombreReceptor").textContent =
          "JOSÉ ANTONIO GALLARDO PÉREZ";
        document.getElementById("tdFolio").textContent =
          uuid.value.trim().toUpperCase();
        document.getElementById("tdFechaExp").textContent =
          "2025-11-20T18:50:27";
        document.getElementById("tdFechaCert").textContent =
          "2025-11-20T18:50:27";
        document.getElementById("tdPac").textContent = "LSO1306189R5";
        document.getElementById("tdTotal").textContent = "876,960.00";
        document.getElementById("tdEfecto").textContent = "Ingreso";
        document.getElementById("tdEstado").textContent = "ACTIVO";
        document.getElementById("tdEstatus").textContent = "INACTIVO";
        document.getElementById("tdFechaCanc").textContent = "N/A";
        document.getElementById("cfdiResult").style.display = "block";
      }
    </script>
  </body>
</html>
